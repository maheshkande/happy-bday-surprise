<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To My Most Precious One</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* ======================================= */
        /* 1. GLOBAL & DYNAMIC BACKGROUND STYLES   */
        /* ======================================= */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
            color: #333;
            overflow-x: hidden;
            height: 100vh;
            /* Dynamic Background for the main content */
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: GradientBG 15s ease infinite;
            transition: background-color 0.5s;
        }

        @keyframes GradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Subtle Background Design */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8bi5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0UmF3IFByb2ZpbGUgdHlwZSBhYWRvYg+vH8kAAAAgSURBVHjaYmBgYIADhgz4+Lhw3t/fBwiBAQEBAQEAAQYAk7s/hG6y97kAAAAASUVORK5CYII=') repeat;
            opacity: 0.1;
            pointer-events: none;
            z-index: 1;
        }

        /* ======================================= */
        /* 2. START PAGE STYLES (THE ENTRANCE)     */
        /* ======================================= */
        #start-page-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('start_bg.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-color: rgba(0, 0, 0, 0.4); 
            background-blend-mode: darken;

            color: white; 
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            cursor: default;
            opacity: 1;
            transition: opacity 1.5s ease-out, background 1s;
            overflow: hidden;
        }
        
        /* New Start Page Container for the Card Look */
        .start-card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            text-align: center;
            color: #333;
            max-width: 90%;
        }

        .start-card h1 {
            font-family: 'Dancing Script', cursive;
            font-size: 3.5em;
            color: #e73c7e;
            margin: 0 0 5px 0;
            text-shadow: none;
        }
        
        .start-card h2 {
             font-family: 'Poppins', sans-serif;
             font-size: 2em;
             margin: 0 0 20px 0;
             color: #4a001a;
        }

        .start-card p {
            font-size: 1.1em;
            margin-bottom: 30px;
            color: #555;
        }
        
        /* Start Button Styling */
        #startButton {
            background-color: #f67280;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 30px;
            font-size: 1.2em;
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.1s;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        #startButton:hover {
            background-color: #e73c7e;
            transform: translateY(-2px);
        }

        /* --- Flower Rain Styling --- */
        .petal {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #ffb6c1; 
            border-radius: 50%;
            opacity: 0;
            z-index: 999;
            animation: petalFall linear infinite;
        }

        @keyframes petalFall {
            0% { transform: translateY(-10vh) rotate(0deg); opacity: 0.8; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }


        /* ======================================= */
        /* 3. SLIDESHOW STYLES                     */
        /* ======================================= */
        #main-content {
            display: none;
            width: 90%;
            max-width: 900px;
            margin: 50px auto;
            position: relative;
            z-index: 10;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            padding: 20px;
            transform: scale(0.8); 
            opacity: 0;
            transition: all 1s ease-out;
        }

        .mySlides {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .mySlides img {
            width: 100%;
            max-height: 400px;
            object-fit: contain; 
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transform: scale(1);
            transition: transform 7s ease-in-out;
            background-color: #f5f5f5;
        }
        
        .mySlides.active img {
             transform: scale(1.05); 
        }

        .caption-text {
            font-size: 1.2em;
            margin-top: 30px;
            min-height: 100px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 8px;
            line-height: 1.6;
            text-align: left;
        }
        
        /* Typewriter Effect CSS */
        .typewriter-text {
            display: inline-block;
            overflow: hidden;
            white-space: pre-wrap; 
            width: 0;
            animation: typing 3s steps(60, end) forwards;
            border-right: .15em solid orange;
        }
        
        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }
        
        /* Pagination Dots */
        .dot-container {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
        }

        .dot {
            height: 15px;
            width: 15px;
            margin: 0 4px;
            background-color: #bbb;
            border-radius: 50%;
            display: inline-block;
            transition: background-color 0.6s ease;
        }

        .active-dot {
            background-color: #f67280; 
            box-shadow: 0 0 8px rgba(246, 114, 128, 0.8);
        }

        /* Next Button */
        #nextButton {
            background-color: #23a6d5;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 1.1em;
            margin-top: 20px;
            cursor: pointer;
            transition: background-color 0.3s;
            
            position: absolute; 
            right: 20px; 
            bottom: 20px; 
            z-index: 20;
        }
        
        .slide-footer {
            height: 60px; 
            position: relative;
        }

        /* ======================================= */
        /* 4. APOLOGY NOTE STYLES (THE CLIMAX)     */
        /* ======================================= */
        #apology-section {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 50; 
            padding-top: 5vh;
        }
        
        .apology-box {
            position: relative;
            width: 90%;
            max-width: 700px;
            margin: 0 auto;
            background: #fff;
            padding: 50px 30px;
            border-radius: 20px;
            box-shadow: 0 0 50px rgba(255, 0, 100, 0.8), 0 0 10px rgba(0,0,0,0.5);
            text-align: center;
            font-family: 'Dancing Script', cursive;
            font-size: 2em;
            color: #4a001a;
            line-height: 1.8;
            max-height: 80vh;
            overflow-y: auto;
            
            transform: translateY(-100%);
            animation: curtainDrop 1.5s forwards cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 60;
        }
        
        @keyframes curtainDrop {
            to { transform: translateY(0); }
        }

        .apology-box h2 {
            font-family: 'Poppins', sans-serif;
            font-size: 1.5em;
            color: #e73c7e;
            margin-bottom: 20px;
        }
        
        /* New Restart/Close Button Style */
        #closeButton {
            background-color: #ff69b4; /* Hot Pink */
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 1.1em;
            margin-top: 30px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        #closeButton:hover {
            background-color: #e73c7e;
        }

        /* Heart Rain Container */
        .heart-rain-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
            z-index: 55;
        }

        .heart {
            position: absolute;
            background: red;
            transform: rotate(-45deg);
            animation: rain linear infinite;
            box-shadow: 0 0 10px rgba(255, 0, 100, 0.9);
        }

        .heart:before, .heart:after {
            content: "";
            position: absolute;
            background: red;
            border-radius: 50%;
        }

        @keyframes rain {
            0% { transform: translateY(-10vh) rotate(-45deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(-45deg); opacity: 0; }
        }
    </style>
</head>
<body onload="setupPage()">

    <audio id="mainMusic" src="aud.mp3" preload="auto" loop muted></audio>
    
    <div id="start-page-overlay">
        <div class="start-card">
            <h1>Happy Birthday</h1>
            <h2>My Dearest Sister...</h2>
            <p>
                Please turn up your volume before opening your gift!
            </p>
            <button id="startButton">Open Your Gift! âœ¨</button>
        </div>
    </div>

    <div id="main-content">
        <div id="slideshow-container">
            <div class="mySlides">
                <img src="photo1.jpg" alt="Slide 1">
                <div class="caption-text"><span class="typewriter-text">ela start cheyalo or ela cheppalo teliyatledu anyway happiest birthday my most precious oneðŸ’•. Appude nek 19yrs ochesai ra, lock down lo parchayam ayyavu annayya ani msg chesavu, chala important aipoyavu. Ala neetho years pass ayyayi chala love and care choopinchavuðŸ’›</span></div>
            </div>

            <div class="mySlides">
                <img src="photo2.jpg" alt="Slide 2">
                <div class="caption-text"><span class="typewriter-text">u r the best one ra. Yeppudu ala navvuthu undu ra, ni smile chala baguntundi. Neetho spend chesina every moment oka manchi memory raðŸ§¡ "Ala ani yekkuva smile cheyaku ra distti thakkuthadiðŸ˜¸jk"</span></div>
            </div>

            <div class="mySlides">
                <img src="photo3.jpg" alt="Slide 3">
                <div class="caption-text"><span class="typewriter-text">Enno sarlu rakhi roju rakhi kadthavu anukune vaadini but okasari kuda avvaledu kani oka rakhi roju kuda miss cheyale nannu wish cheyadam, na paina entha kopam unna avvi anni pakkaki petti wish chesavuðŸ¥º</span></div>
            </div>

            <div class="mySlides">
                <img src="photo4.jpg" alt="Slide 4">
                <div class="caption-text"><span class="typewriter-text">na kosam oka gift 5yr dachipettavu chudu I can feel how I am being mean to you have always been my frst priority.</span></div>
            </div>

            <div class="mySlides">
                <img src="photo5.jpg" alt="Slide 5">
                <div class="caption-text"><span class="typewriter-text">No matter how many mistakes Iâ€™ve made, my love and respect for you will never change. Youâ€™ve always been my strength, my comfort, and my safe place. Even when I fail, I know youâ€™ll always be the one who truly understands me.</span></div>
            </div>

            <div class="mySlides">
                <img src="photo6.jpg" alt="Slide 6">
                <div class="caption-text"><span class="typewriter-text">You were the one who cared for me when no one else did, the one who made sure I never felt alone. Every little act of love from u still lives in my heart, and I realize now how deeply I needed it, how much I need u even today.</span></div>
            </div>

            <div class="mySlides">
                <img src="photo7.jpg" alt="Slide 7">
                <div class="caption-text"><span class="typewriter-text">You always felt my pain even when I didnâ€™t say a word, and you stood by me when I couldnâ€™t stand for myself. That kind of care is rare, and I will never forget how much you gave without expecting anything in return.</span></div>
            </div>

            <div class="mySlides">
                <img src="photo8.jpg" alt="Slide 8">
                <div class="caption-text"><span class="typewriter-text">Happy Birthday to the sweetest sister in the world! ðŸŽ‚âœ¨ You are my biggest blessing, my endless joy, and the one Iâ€™ll love not just for today, but for forever â€” to infinity and beyond. May your heart always shine as bright as your smile." ðŸ’– "Love you from the moon to the stars and beyond ðŸ¤—ðŸ’•".</span></div>
            </div>
            
            <div class="slide-footer">
                <div class="dot-container">
                    <span class="dot"></span> 
                    <span class="dot"></span>
                    <span class="dot"></span> 
                    <span class="dot"></span>
                    <span class="dot"></span> 
                    <span class="dot"></span>
                    <span class="dot"></span> 
                    <span class="dot"></span>
                </div>
                <button id="nextButton" onclick="showSlides()">Next Memory &rarr;</button>
            </div>
        </div>
    </div>

    <div id="apology-section">
        <div class="heart-rain-container"></div>
        <div class="apology-box">
            <h2>A Final Word...</h2>
            <p>
                "This may be the last time I get to speak to you like this, and I want every word to matter.<br><br>
                You have been my light, my strength, my safe place. You gave me more love and care than I ever deserved, and I failed to hold on to it. Every mistake I made has cost me the most precious person in my life â€” you.<br><br>
                I know now that Iâ€™m not the brother you wantedâ€¦ not the one you deserve. You deserve someone who will always protect your smile, never hurt your heart, and never let you feel alone. I wasnâ€™t that person, though I wished I could be.<br><br>
                No matter where life takes you from here, please remember: every moment, every memory, every bit of love you gave me will stay with me. Even if Iâ€™m no longer by your side, a part of me will always be carrying you in my heart. Iâ€™m sorryâ€¦ for everything."
                <br><br>
                --Love you even more ðŸ’•
            </p>
            <button id="closeButton" onclick="restartProject()">Just One More Time? âœ¨</button>
        </div>
    </div>


<script>
    // =======================================
    // JAVASCRIPT LOGIC
    // =======================================

    const TYPEWRITER_SPEED = 60;
    let slideIndex = 0;
    let heartsGenerated = false;
    
    const mainMusic = document.getElementById('mainMusic');
    
    // --- MAIN AUDIO FUNCTION ---
    function playMusic(audioElement, volume, loop = true) {
        audioElement.muted = false;
        audioElement.volume = volume;
        audioElement.loop = loop;
        audioElement.play().catch(e => console.log("Music play failed:", e));
    }


    // --- START PAGE INITIALIZATION ---
    function setupPage() {
        document.getElementById('startButton').addEventListener('click', startContent);
        
        // 1. Attempt to play main music muted immediately (crucial for mobile autoplay)
        mainMusic.play().catch(e => console.log("Initial silent main music play failed."));

        generateFlowerRain();
    }

    function startContent() {
        const overlay = document.getElementById('start-page-overlay');
        const mainContent = document.getElementById('main-content');
        
        overlay.style.opacity = '0';
        
        // Music Start Logic: Unmute and set volume
        // This is the one user click that allows unmuted audio to start
        playMusic(mainMusic, 0.5); // Start main music for the slideshow

        setTimeout(() => {
            overlay.style.display = 'none';
            mainContent.style.display = 'block';
            
            mainContent.style.transform = 'scale(1)';
            mainContent.style.opacity = '1';

            slideIndex = 0; 
            showSlides();
        }, 1500); 
    }

    // --- SLIDESHOW LOGIC ---
    function showSlides() {
        const slides = document.getElementsByClassName("mySlides");
        const dots = document.getElementsByClassName("dot");
        const nextButton = document.getElementById('nextButton');

        if (slideIndex >= slides.length) {
            // SLIDESHOW ENDED: Trigger the Apology Highlight
            triggerApologyHighlight();
            return;
        }

        // --- HIDE PREVIOUS SLIDE ---
        if (slideIndex > 0) {
             slides[slideIndex - 1].style.display = "none";
             slides[slideIndex - 1].classList.remove('active');
        }

        // --- PREPARE CURRENT SLIDE (Typewriter Effect) ---
        const currentSlide = slides[slideIndex];
        const captionTextElement = currentSlide.querySelector('.typewriter-text');
        
        nextButton.style.display = 'none';

        const fullText = captionTextElement.textContent;
        captionTextElement.style.width = '0';
        captionTextElement.style.animation = 'none'; 
        captionTextElement.offsetHeight; 
        
        const duration = fullText.length / TYPEWRITER_SPEED + 0.5; 
        captionTextElement.style.animation = `typing ${duration}s steps(${fullText.length}, end) forwards`;
        
        // --- DISPLAY CURRENT SLIDE ---
        currentSlide.style.display = "block";
        currentSlide.classList.add('active');
        
        // Update dots
        for (let i = 0; i < dots.length; i++) {
             dots[i].className = dots[i].className.replace(" active-dot", "");
        }
        dots[slideIndex].className += " active-dot";
        
        // --- SHOW BUTTON AFTER TYPING ---
        setTimeout(() => {
            nextButton.style.display = 'block';
            if (slideIndex === slides.length - 1) {
                nextButton.textContent = "Final Apology & Gift \u2192";
                nextButton.style.backgroundColor = '#e73c7e';
            } else {
                nextButton.textContent = "Next Memory \u2192";
                nextButton.style.backgroundColor = '#23a6d5';
            }
        }, duration * 1000);

        slideIndex++;
    }

    // --- APOLOGY HIGHLIGHT LOGIC (SIMPLEST FIX) ---
    function triggerApologyHighlight() {
        const apologySection = document.getElementById('apology-section');
        const rainContainer = document.querySelector('.heart-rain-container');
        
        // 1. Set the volume instantly to ensure it's audible.
        // The music is already playing, so we just adjust the volume.
        mainMusic.volume = 0.6; 
        
        // 2. Immediately hide the slideshow and show apology section
        document.getElementById('main-content').style.display = 'none';
        apologySection.style.display = 'block';

        // 3. Generate Heart Rain (only once)
        if (!heartsGenerated) {
            generateHeartRain(rainContainer);
            heartsGenerated = true;
        }
    }
    
    // --- RESTART LOGIC ---
    function restartProject() {
        // 1. Fully stop and reset the music only when restarting the whole project
        mainMusic.pause();
        mainMusic.currentTime = 0;
        
        // 2. Hide apology and reset slideshow
        document.getElementById('apology-section').style.display = 'none';
        document.getElementById('main-content').style.display = 'none';

        // 3. Show start page
        const overlay = document.getElementById('start-page-overlay');
        overlay.style.display = 'flex';
        overlay.style.opacity = '1';
        
        // 4. Re-setup music for a new start
        mainMusic.muted = true;
        mainMusic.play().catch(e => console.log("Initial silent play failed."));
        
        // Reset state
        slideIndex = 0;
    }


    // --- UTILITY FUNCTIONS (Rain, Flowers) ---
    function generateFlowerRain(container) {
        const overlay = document.getElementById('start-page-overlay');
        const petalCount = 40;
        
        for (let i = 0; i < petalCount; i++) {
            const petal = document.createElement('div');
            petal.classList.add('petal');

            const randomX = Math.random() * 100;
            const randomDuration = Math.random() * 12 + 8;
            const randomDelay = Math.random() * 10;
            const randomSize = Math.random() * 5 + 8;

            petal.style.width = `${randomSize}px`;
            petal.style.height = `${randomSize}px`;
            petal.style.left = `${randomX}vw`;
            petal.style.animationDuration = `${randomDuration}s`;
            petal.style.animationDelay = `${randomDelay}s`;
            petal.style.transform = `rotate(${Math.random() * 360}deg)`;

            overlay.appendChild(petal);
        }
    }
    
    function generateHeartRain(container) {
        const heartCount = 75; 
        
        for (let i = 0; i < heartCount; i++) {
            const heart = document.createElement('div');
            heart.classList.add('heart');

            const size = Math.random() * 10 + 15;
            heart.style.width = `${size}px`;
            heart.style.height = `${size}px`;
            
            const randomX = Math.random() * 100;
            const randomDuration = Math.random() * 10 + 7;
            const randomDelay = Math.random() * 10;

            heart.style.left = `${randomX}vw`;
            heart.style.animationDuration = `${randomDuration}s`;
            heart.style.animationDelay = `${randomDelay}s`;

            // Dynamic CSS for heart shape
            const style = document.createElement('style');
            style.innerHTML = `
                .heart:nth-child(${i + 1}):before,
                .heart:nth-child(${i + 1}):after {
                    width: ${size}px;
                    height: ${size}px;
                }
                .heart:nth-child(${i + 1}):before {
                    top: ${-size / 2}px;
                }
                .heart:nth-child(${i + 1}):after {
                    left: ${size / 2}px;
                }
            `;
            document.head.appendChild(style);


            container.appendChild(heart);
        }
    }
</script>

</body>
</html>
